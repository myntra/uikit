@import '@accoutrement';

@mixin fab-item-with-caret(
  $direction,
  $translate-x,
  $translate-y,
  $offset-x,
  $offset-y,
  $display,
  $child-to-add-in,
  $offsets
) {
  display: $display;
  animation-name: slide#{$direction};
  animation-duration: 0.5s;
  &:#{$child-to-add-in}-child {
    &::after {
      position: absolute;
      width: size('2x');
      height: size('2x');
      content: '';
      background: color('white');
      box-shadow: $offset-x $offset-y 2px 0 rgba(0, 0, 0, 0.1),
        5px 5px 15px 5px rgba(0, 0, 0, 0);
      transform: translate($translate-x, $translate-y) rotate(45deg);

      @each $prop, $value in $offsets {
        #{$prop}: #{$value};
      }
    }
  }
}

.fab-list {
  position: relative;
  padding-left: 0;
  overflow: auto;
  list-style: none;
  margin-block-start: 0;
  margin-block-end: 0;

  &.up,
  &.down {
    right: size('2x');
  }

  &:focus {
    outline: none;
  }

  &__item {
    position: relative;
    background-color: color('white');
    box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),
      0 3px 1px -2px rgba(0, 0, 0, 0.12), 0 1px 5px 0 rgba(0, 0, 0, 0.2);

    @include transition('all');
    @include border-radius('button');

    &.up {
      margin: size('2x') size('1x');

      /** Params: 
      * $direction,
      * $translate-x,
      * $translate-y,
      * $offset-x,
      * $offset-y,
      * $display,
      * $child-to-add-in,
      * $offsets
      */
      @include fab-item-with-caret(
        up,
        0,
        50%,
        2px,
        2px,
        block,
        'last',
        (
          left: size('5x'),
          bottom: 0,
        )
      );
    }
    &.down {
      margin: size('2x') size('1x');

      @include fab-item-with-caret(
        down,
        0,
        -50%,
        -1px,
        -1px,
        block,
        'first',
        (
          left: size('5x'),
          top: 0,
        )
      );
    }
    &.right {
      margin: size('2x') 0 size('2x') size('2x');

      @include fab-item-with-caret(
        right,
        -50%,
        -50%,
        -1px,
        1px,
        inline-block,
        'first',
        (
          left: 0,
          top: 50%,
        )
      );
      &:last-child {
        margin-right: size('2x');
      }
    }
    &.left {
      margin: size('2x') size('2x') size('2x') 0;

      @include fab-item-with-caret(
        left,
        50%,
        -50%,
        1px,
        -1px,
        inline-block,
        'last',
        (
          right: 0,
          top: 50%,
        )
      );
      &:first-child {
        margin-left: size('2x');
      }
    }
  }
}

@keyframes slideup {
  from {
    transform: scaleY(0.5) translateY(size('10x')) translateX(0);
  }

  to {
    transform: scaleY(1) translateY(0) translateX(0);
  }
}

@keyframes slidedown {
  from {
    transform: scaleY(0.5) translateY(negative(size('10x'))) translateX(0);
  }

  to {
    transform: scaleY(1) translateY(0) translateX(0);
  }
}

@keyframes slideright {
  from {
    transform: scaleX(0.5) translateY(0) translateX(negative(size('10x')));
  }

  to {
    transform: scaleX(1) translateY(0) translateX(0);
  }
}

@keyframes slideleft {
  from {
    transform: scaleX(0.5) translateY(0) translateX(size('10x'));
  }

  to {
    transform: scaleX(1) translateY(0) translateX(0);
  }
}
