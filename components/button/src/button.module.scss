@import '@accoutrement';

/* stylelint-disable no-descending-specificity */

.container {
  @include border('button');
  @include border-radius('button');
  @include padding('button');
  @include typography('button');
  @include transition('button');

  display: inline-block;
  line-height: 1.4;
  text-decoration: none;
  cursor: pointer;
  appearance: none;

  + .container {
    @include margin-left('large');
  }

  &::-moz-focus-inner {
    border: 0;
  }

  &:focus {
    outline: outline('none');
  }

  &:focus-visible {
    outline: border('keyboard-focus');
  }

  &:disabled {
    cursor: not-allowed;
  }

  &.primary {
    color: contrast-text-color('primary-dark-1');
    background-color: color('primary');
    border-color: color('primary');

    &:disabled {
      color: contrast-text-color('button.disabled', 'disabled');
      background-color: color('button.disabled');
      border-color: color('button.disabled');
    }

    &:not(:disabled) {
      &:hover {
        background-color: color('primary-dark-2');
        border-color: color('primary-dark-2');
      }

      &:active,
      &:active:hover {
        background-color: color('primary-dark-3');
        border-color: color('primary-dark-3');
      }
    }
  }

  &.secondary {
    color: text-color('primary');
    background-color: color('white');
    border-color: color('primary');

    &:disabled {
      color: contrast-text-color('gray-light-3', 'disabled');
      background-color: color('gray-light-3');
      border-color: color('button.disabled');
    }

    &:not(:disabled) {
      &:hover {
        background-color: color('primary-light-3');
      }

      &:active,
      &:active:hover {
        background-color: color('primary-light-2');
      }
    }
  }

  &.text {
    @include padding('icon-button');

    color: text-color('primary');
    background-color: transparent;
    border-color: transparent;

    &:disabled {
      color: text-color('primary', 'disabled');
    }

    &:not(:disabled) {
      &:hover {
        color: text-color('primary', 'medium');
      }

      &:active,
      &:active:hover {
        color: text-color('primary');
      }
    }
  }

  &.inherit {
    color: var(--current-color, currentColor);

    @include transition('all');

    &:disabled {
      color: var(--current-color, currentColor);
    }

    &:not(:disabled) {
      &:hover {
        color: var(--current-color, currentColor);
      }

      &:active,
      &:active:hover {
        color: var(--current-color, currentColor);
        transform: translateY(2px);
      }
    }
  }

  &.icon {
    @include padding('icon-button');
    @include border-radius('button.circle');

    box-sizing: content-box;
    width: 1em;
    height: 1em;
    svg {
      transform: scale(1.25);
      transform-origin: center center;
    }
  }

  &.notification-button {
    @include border-radius('notification.circle');

    z-index: z-index('notification');
    width: 2em;
    height: 2em;
    box-shadow: shadow('raised');
    .notification-icon {
      position: relative;
      z-index: z-index('notification');
      svg {
        width: 1.4em;
        height: 1.4em;
        margin-left: negative(size('3x'));
      }
      .count {
        position: absolute;
        top: negative(size('2x'));
        min-width: size('4x');
        height: size('4x');
        font-size: 10px;
        color: color('primary');
        background: color('white');
        border: 1px solid color('white');
        border-radius: size('3x');
      }
    }
  }

  > .icon {
    // TODO: Remove this hack for aligning icon with text.
    display: inline-block;
    transform: translateY(1px);

    &.leading {
      padding-inline-end: 1ch;
    }

    &.trailing {
      padding-inline-start: 1ch;
    }

    &.loading {
      position: absolute;
      top: 50%;
      left: 50%;
      margin-top: -0.5em;
      margin-left: -0.5em;
    }
  }

  &.loading {
    position: relative;

    > *:not(.loading) {
      color: transparent; // Hide Text and icons.
    }
  }

  &.small {
    padding: size('1x') size('4x');
  }
}
